# 暗記学習支援システム 要件定義書

## 1. システム概要

### 1.1 目的
暗記学習において「覚えた内容を書き出し、間違いや抜けを確認する」学習法を効率化し、音声入力にも対応した学習支援システムを提供する。

### 1.2 背景
- 暗記後の書き出し学習法は効果的だが、以下の課題がある
  - 間違い部分の特定が困難
  - 抜け・不足部分の特定が困難
- 移動中の隙間時間での学習需要（音声入力対応）

## 2. 機能要件

### 2.1 コア機能

#### 2.1.1 学習内容登録機能
- **機能名**: 原文登録
- **概要**: 暗記対象となる原文テキストを登録
- **入力**: テキスト入力またはファイルアップロード
- **出力**: 登録完了通知

#### 2.1.2 回答入力機能
- **機能名**: 回答記録（テキスト/音声・分割入力対応）
- **概要**: 暗記した内容をテキストまたは音声で段階的に入力
- **入力方式**:
  - テキスト入力（直接入力・編集可能）
  - 音声入力（録音開始/停止ボタンによる制御）
- **分割入力機能**:
  - 複数回に分けて入力可能
  - 各セグメントの個別編集・削除
  - セグメント順序の変更（ドラッグ&ドロップ）
- **出力**: セグメント一覧表示と統合された入力内容

#### 2.1.3 比較・分析機能
- **機能名**: 差分分析
- **概要**: 原文と回答を比較し、間違いと抜けを特定
- **処理**:
  - AI APIを使用した意味的比較
  - 差分の視覚的表示
- **出力**:
  - 間違い箇所のハイライト
  - 不足部分の表示
  - 理解度スコア

### 2.2 補助機能

#### 2.2.1 学習履歴表示
- 過去の学習結果一覧
- 理解度の推移グラフ

#### 2.2.2 データエクスポート
- 学習結果のCSVダウンロード

## 3. ユーザーストーリー

### 3.1 基本学習フロー
```
As a 学習者
I want to 暗記した内容を入力して原文と比較したい
So that 間違いや抜けを効率的に確認できる
```

**受け入れ条件**:
- 原文を登録できる
- テキストまたは音声で回答を入力できる
- 差分が視覚的に分かりやすく表示される

### 3.2 移動中学習フロー
```
As a 通勤・通学者
I want to 移動中に音声で暗記内容を段階的に入力したい
So that 隙間時間を有効活用し、途中で中断しても続けられる
```

**受け入れ条件**:
- 録音開始/停止を簡単に制御できる
- 複数回に分けて音声入力できる
- 過去の入力内容を編集・削除できる
- セグメントの順序を変更できる
- モバイル端末で快適に使用できる

### 3.3 学習管理フロー
```
As a 継続学習者
I want to 過去の学習履歴を確認したい
So that 学習進捗を把握し継続的に改善できる
```

**受け入れ条件**:
- 学習履歴が時系列で確認できる
- 理解度の変化が分かる
- データをエクスポートできる

## 4. 非機能要件

### 4.1 ユーザビリティ
- レスポンシブデザイン（PC・タブレット・スマートフォン対応）
- 直感的なUI/UX
- 音声入力の高い認識精度

### 4.2 性能
- 差分分析処理時間: 5秒以内
- 音声認識応答時間: 3秒以内

### 4.3 セキュリティ
- API Key入力時の適切な暗号化
- ローカルストレージへの一時保存

## 5. 技術要件

### 5.1 フロントエンド
- **フレームワーク**: Vue.js 3
- **状態管理**: Pinia
- **ビルドツール**: Vite
- **テスティング**: Playwright, Cypress

### 5.2 外部サービス連携
- **AI API**: OpenAI GPT / Anthropic Claude（ユーザー設定）
- **音声認識**: Web Speech API / 外部音声認識サービス

### 5.3 データ管理
- **第1フェーズ**: ローカルストレージのみ
- **第2フェーズ**: バックエンドAPI（将来実装）

## 6. 画面構成

### 6.1 メイン画面
- 原文登録エリア
- 入力モード切り替え（テキスト/音声）
- **セグメント管理エリア**:
  - 録音開始/停止ボタン（音声モード時）
  - セグメント一覧表示
  - 各セグメントの編集・削除・並び替えボタン
- 分析実行ボタン
- 分析結果表示エリア
- API Key設定

### 6.2 履歴画面
- 学習履歴一覧
- 詳細結果表示
- エクスポート機能

### 6.3 設定画面
- API Key管理
- 音声設定
- 表示設定

## 7. 開発優先度

### Phase 1 (MVP)
1. 基本UI実装
2. テキスト入力による差分分析
3. AI API連携
4. ローカルデータ保存

### Phase 2
1. 音声入力対応
2. 学習履歴機能
3. モバイル最適化

### Phase 3
1. データエクスポート
2. 詳細分析機能
3. UI/UX改善